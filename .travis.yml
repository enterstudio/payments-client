language: node_js
sudo: false
node_js:
- '0.10'
before_script:
- npm rebuild
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
script: npm test
notifications:
  irc:
    channels:
    - irc.mozilla.org#payments
    on_success: change
    on_failure: always
deploy:
  provider: npm
  email: payments-devs-automation+npm@mozilla.com
  skip_cleanup: true
  api_key:
    secure: f8MgczMpG2fon4ZZrLJSP2AreNOTI5k1XqNM/UGtrXCTlsC3n3C3EwCGCG5Hk5fK9sjkggWPxv4jNP9VsNDqbExIaeyGEvfb0mtp5eK+CNlkldfqAwlU9PkwrvxVWyUWYBkBO5hN9XqExa6gN6gwOgCO3jLz6PyCL2UugxTOKC02LL+A+9MeUKAmWETQnysv8ywuuyuXWlFDQvaSNdBguOpfjgkSNxQNxdS4tj77kF51H3OEbGJ8kVDbxgHRALwGwvPMhnbUEsF8gLQ8DubyNTGnhfu+cvarP9xiXhhjjT02y9yU0Dfo+MCs5cfs1ZZE/cwKaOc6cvMKJigkNjfuetnHkLdlaUkWt87sGKKQUzLhqgr4LX3D8BhYkz6alctFueFs5c0dwGmTfFPlz0S4R/qgOrXaCsumJn/TiVdhZ3bzkuyfnWY4cwP/cqELg87kX8B4yGwhmQRA7DErt1/T6B0q9J+/cnDLW1oaljdvC0eWgqEGpDfZ16aWBWENHrx7sblKGQxDN/6ewWaX++87FASkYVfDeSif77JcD6jhKgOh7eoC+xyABdl7hPtOYa3NG36awy/AvzFwkKaqc1QxVaHs7Ezk9pYjk89Ylo5PRH8AsBC9qrWX0wtCipxCfzJI5Yfaemp9U8WWVtIwgWRy2fn40wf92U0p6IVZZ27ciw0=
  on:
    tags: true
    repo: mozilla/payments-client

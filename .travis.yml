language: node_js
sudo: false
node_js:
- '0.10'
before_script:
- npm rebuild
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
script: npm test
notifications:
  irc:
    channels:
    - irc.mozilla.org#payments
    on_success: change
    on_failure: always
deploy:
  provider: npm
  email: payments-devs-automation+npm@mozilla.com
  skip_cleanup: true
  api_key:
    secure: L1yD1CYpeF4likLatL38hFgKZcKcRj6ZXKTtpAHkKTEQBj1dw8/vVzzXpZhJl+zfuNILdeXDRQPJ1+11hMoJUbUnUu8zaTjmijBCxkbrX7P/j2J0RrPxdfHJsoblKxRIAcTif0O/do8PpPHM8RHzxu1bPFiCg+qrwOxFsgr7fJba1MUTUn88icKRh18LNL17y4vjpVHee2TltQ0285PP9LePEnhE/wslY75nG80zCuENF5k2Cyj4l/jhjXjPTv/bsG2PbfEw4I5+qPZVjJ4VcW+nfgJdgv3x0QEuu0yDs1Q+GKQeXizrkHSElSL3ArlCcSTWyfkjWy+SfIN3B47Eu7gi5+EQJIzSt0Wv1BV5CMeKPJKPi3ZkL3JnlCoo+Vra8s85BXU8zzIJrcH6t1UOAAlP0tiW734T2oTkioEgH/eX75aGfDP89sigqQ5L6IlzTtHAmEG5bBg2ICgnvYEgsFCiseSDrmsKkatxgwunnRW8hQ5ZOtJIaPZP25MdfxiOv74z1cEr8H2qhO6wmmtve90xdISBRfqIzOrLIpkxzRxgWu9US4iRy1z9heTQxe7PwTHXhQPu2q+7aKVLcfKEFyUJ14U6ElWtu6exradBAb6Hd0SfUxPIV4XaTaKIUscOH3rYDmJlFfkJRyJyBWcf2MrDZOwP+uxOpyXxSBhHUos=
  on:
    tags: true
    repo: mozilla/payments-client
env:
  global:
  - secure: K5tcKKGIreVPVAYKfck9hxlDTQCiB12bHRm2LnXiVo7mKczd6M11z5zYxKGgQAlNMieSyjyRoPjffjMZRAwFaBoFAnWGRVCBtpQKnJk+3b9L8Ma/lXg54FB1MSA8O4OV37WCbKMa/npIluZh0CKkL3+UOI5+ryXVtP52J7fjySRKUHOpetNLWi/VdoPSa9rxZrOux/9Zfx9PkZokOM6nT0oNE5ABKQkBIwPMPhujf+BmLAzaDzvcWMd6JbHuUegyXv++iL4rHurY+5uHDCQJBF3Uls+8iYzLkRKfHu53Y93LsFri33mNaBsDURcvDjzfVsWLB7wpAKdt+X3V3gJ+tYZx/M6iD1MFtIvFR0zsdrKVrqcKe9p7eARmGHzCN4w6yWQHZgJTNVTj+fVxuwNYor2m8BYRx1sDDFTxS+hrJtgjTEyMCw45AWXQ+1ZtIoy8LzYHx9e1/FcWTw8C7RvLh3vkoTdWGmaxtMcjobaHRwr9LyTUjt1sR2+/dI8UwQbhcuvbEsG0cM0Glvlsqc6r9Pr/eRRpvH++T7hjQ7TUPtUZe53aqzsCSyO/ABMReEhsUl4FvuCR307L2v1RURTxBPu+rN2TCbW/kkjw+rue6WCwNEhlbnmEfZQAfAsLNjsWTOQrZPVwSb+QSxL2Co8+STLqOc06mK48LZq6LSlTCmo=
  - secure: YGnmAIr5Cqlbjxt3Bm3ASQ+JYSLv9pJ/RPVuorZ2HT914Qc3YsrpZsQhX4E7ZSW9GpFVHb/s8PHqe893CgZT7c/XIxy3xXLg845cBWelBbhl3TD5lQq83WeVSY4kVd/wrIXLHtqEtDffwyo+uBPnhsVUdLfDkT6neY7r9lwCxAjLJxFYOzQY3MX3XC2KpSB+2uvccuEdN+as2SfUs3Mk9H01o1C3/iT2fQPExg8yw5Kig4Gk27rhafL8uuUXQxwZcZEvVyQt6cvO9BXxEkjGYihvU26ODZdUBOPeU/0CurF8yFH3xaen3Hg4c04XGiHF6EofqAuIQrUobWtslDSXLFYO4svHPtzFuprAkGlSM27MIIokZB2434Z7Xp9hszgNQpJxxmHF2d0/7JBcDr72txD8Ft7C9Ku8hWt/2ZSy+FdmWEkktW5+EnKsiukoSNmbf5pI9VvOVD3mS6QxWraSzxRxp30FiJCm9OMOKH59F7R6E9l5diFhVIaRmXcSINBHMO7JjGquYw9sOl18D63lAAX+3//t6OETJizEFUpya1908yuaySdGimHtr/U8h1GuKLndzaMxi4rVfvI4kNY91DDeFj5pHVAC6mLmClDgv3qeEQHnObs9coX1W4AIpJt+NvTz7t10/2nxelyTcjJa6DFgku8wVsaYiBEClq/bgMk=

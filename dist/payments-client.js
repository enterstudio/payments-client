!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.PaymentsClient=e():t.PaymentsClient=e()}(this,function(){return function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){"use strict";function n(t){t=t||{},this.modalParent=t.modalParent||document.documentElement,this.id="_"+Math.random().toString(36).substr(2,9),this.modalWidth=t.modalWidth||300,this.modalHeight=t.modalHeight||500,this.closeDelayMs="number"==typeof t.closeDelayMs?t.closeDelayMs:300,this.accessToken=t.accessToken,this.product=t.product,this.paymentHost=t.paymentHost||"http://pay.dev:8000/",this.httpsOnly="undefined"==typeof t.httpsOnly?!0:t.httpsOnly;var e=i.getProtocol(this.paymentHost);if(this.httpsOnly===!0&&"https:"!==e)throw new Error("paymentHost is not https");if("http:"!==e&&"https:"!==e)throw new Error("paymentHost must be http or https");if("string"!=typeof this.product)throw new Error("A 'product' string must be provided");if("string"!=typeof this.accessToken)throw new Error("An 'accessToken' string must be provided");return this.httpsOnly===!1&&console.warn("httpsOnly is set to false. Only use for dev"),this}var i=o(1);n.prototype={classPrefix:"fxa-pay",prefix:function(t){return this.classPrefix+"-"+t},getStyle:function(t,e){return"undefined"!=typeof getComputedStyle?getComputedStyle(t,null).getPropertyValue(e):t.currentStyle[e]},iframeStyle:{border:"none",width:"100%",height:"100%"},closeButtonStyle:{color:"#666",fontSize:"20px",position:"absolute",padding:"10px",top:0,right:0,textDecoration:"none"},outerStyle:{backgroundColor:"rgba(0, 0, 0, 0.5)",position:"fixed",top:0,bottom:0,left:0,right:0,zIndex:2e3,transition:"opacity 0.3s",opacity:0},getInnerStyle:function(){var t=this;return{padding:"5px",paddingTop:"25px",position:"absolute",top:"50%",left:"50%",height:t.modalHeight+"px",width:t.modalWidth+"px",backgroundColor:"#fff",marginTop:"-"+t.modalHeight/2+"px",marginLeft:"-"+t.modalWidth/2+"px",border:"1px solid #666",boxShadow:"0 3px 7px rgba(0, 0, 0, 0.5)",zIndex:2010,transition:"opacity 0.3s",opacity:0}},applyStyles:function(t,e){Object.keys(e).forEach(function(o){t.style[o]=e[o]})},buildModal:function(){var t=this,e=document,o=e.createElement("div");o.setAttribute("id",this.id),o.className=this.prefix("container"),o.addEventListener("click",function(e){e.preventDefault(),t.close()},!1);var n=e.createElement("div");n.className=this.prefix("modal"),n.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation()},!1),o.appendChild(n),this.applyStyles(o,this.outerStyle);var r=e.createElement("a");r.href="#";var s=e.createTextNode("Ã—");r.appendChild(s),this.applyStyles(r,this.closeButtonStyle),r.addEventListener("click",function(e){e.preventDefault(),t.close()},!1),n.appendChild(r);var a=e.createElement("iframe"),l=i.buildIframeSrc(this.paymentHost,{access_token:this.accessToken,product:this.product});return a.setAttribute("src",l),n.appendChild(a),this.applyStyles(a,this.iframeStyle),this.applyStyles(n,this.getInnerStyle()),o._inner=n,o},show:function(){this.modal=this.buildModal(),this.parentOverflow=this.getStyle(this.modalParent,"overflowY"),this.modalParent.style.overflowY="hidden",this.modalParent.appendChild(this.modal),this.modal.style.opacity=1,this.modal._inner.style.opacity=1},close:function(){this.modalParent.style.overflow=this.parentOverflow,this.modal.style.opacity=0,this.modal._inner.style.opacity=0;var t=this;window.setTimeout(function(){t.modal.parentNode.removeChild(t.modal)},this.closeDelayMs)}},t.exports=n},function(t,e,o){"use strict";t.exports={getProtocol:function(t){var e=document.createElement("a");return e.href=t,e.protocol},serialize:function(t){var e=[];for(var o in t)t.hasOwnProperty(o)&&e.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return e.join("&")},buildIframeSrc:function(t,e){return t=/\/$/.test(t)?t:t+"/",t+"?"+this.serialize(e)}}}])});